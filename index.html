<!DOCTYPE html>
<html>
  <head>
    <title>Cape Town Informal Settlement Map</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <!-- tutorial docs -->
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
    <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
  </head>

  <body>
  <div class="row intro-text">
  <div class="col-lg-8 col-lg-offset-2">
    <h1>Cape Town Informal Settlement Map</h1>

    <p>There are 437 informal settlement pockets in Cape Town. Toggle between map and satellite view. Explore the map to find individual pockets. Click on a pocket to see see more information. Click on the layers to see trends.</p>
    </div>
    </div>

  <div class="row">
    <div class="col-lg-8 col-lg-offset-2" id="infoDisplay"> <!-- Contextual SubLayer Information Start -->

    <div id="infoDefault">
    <h3>Density</h3>
    <p>The Density of a pocket is measured in dwelling per hectare or DHa. We have calculated this by dividing the number of households by the size of the land. The density of a pocket is an important consideration because it determines how easily basic services can be installed. Density ranges between 3 DHa at Kroonendal in Houtbay to about 3007 DHa at Jim Se Bos. To put this into perspective the target density for affordable housing of between 1 and 4 stories is around. [Add analysis on spatial arrangement]</p>
    </div>

    <div id="infoHousing" class="hidden">
    <h3>Households</h3>
    <p>The number of households in pocket was obtained from the Human Settlements Directorate. There is a wide variation. Some pockets, like Chris Hani Park have as little as 3 while some, like Enkanini, have nearly 8000 households! Altogether there are 146,626 households living in informal settlements. That is about 00% of all households in the City of Cape Town. The average pocket has around 340 households but this is skewed by the large informal settlements - the majority of pockets have less than 800 households.[Add analysis on spatial arrangement]</p>
    </div>

    <div id="infoAge" class="hidden">
    <h3>Age of Informal Settlements</h3>
    <p>The age of an informal settlement tells you how long it has been since it was first established. It does not show how a particular pocket has grown over time or whether the same people have been living there. Age data was obtained from the Human Settlements Directorate. It is divided into categories in the table below. Most pockets are between 15 and 20 years old. In fact around 103 are older than 20 years. As few as 17 pockets are less than 5 years old. This shows that most pockets were established before the year 2000. [Add analysis on spatial arrangement]</p>
    </div>

    <div id="infoTempSani" class="hidden">
    <h3>Temporary Sanitation</h3>
    <p>Placeholder for explanatory text.</p>
    </div>

    <div id="infoUpgrade" class="hidden">
    <h3>Upgrade Category</h3>
    <p>Placeholder for explanatory text.</p>
    </div>

    <div id="infoDensity" class="hidden">
    <h3>Density</h3>
    <p>The Density of a pocket is measured in dwelling per hectare or DHa. We have calculated this by dividing the number of households by the size of the land. The density of a pocket is an important consideration because it determines how easily basic services can be installed. Density ranges between 3 DHa at Kroonendal in Houtbay to about 3007 DHa at Jim Se Bos. To put this into perspective the target density for affordable housing of between 1 and 4 stories is around [XX]. [Add analysis on spatial arrangement]</p>
    </div>

    </div> <!-- Contextual SubLayer Information End -->
</div>

<ul id="layer-select-tiny" class="hidden-md hidden-lg hidden-sm">
  <li class="btn btn-block btn-default select-sublayer0"><i class="fa fa-home fa-fw" aria-hidden="true"></i> Households</li>
  <li class="btn btn-block btn-default select-sublayer1"><i class="fa fa-history fa-fw" aria-hidden="true"></i> Age</li>
  <li class="btn btn-block btn-default select-sublayer2"><i class="fa fa-tint" aria-hidden="true"></i> Temporary toilets</li>
  <li class="btn btn-block btn-default select-sublayer3"><i class="fa fa-wrench fa-fw" aria-hidden="true"></i> Upgrade category</li>
  <li class="btn btn-block btn-default active select-sublayer4"><i class="fa fa-building-o fa-fw" aria-hidden="true"></i> Density</li>
</ul>

<ul id="layer-select-mobile" class="hidden-md hidden-lg hidden-xs">
  <li class="btn btn-default select-sublayer0"><i class="fa fa-home fa-fw" aria-hidden="true"></i> Households</li>
  <li class="btn btn-default select-sublayer1"><i class="fa fa-history fa-fw" aria-hidden="true"></i> Age</li>
  <li class="btn btn-default select-sublayer2"><i class="fa fa-tint" aria-hidden="true"></i> Temporary toilets</li>
  <li class="btn btn-default select-sublayer3"><i class="fa fa-wrench fa-fw" aria-hidden="true"></i> Upgrade category</li>
  <li class="btn btn-default active select-sublayer4"><i class="fa fa-building-o fa-fw" aria-hidden="true"></i> Density</li>
</ul>

    <!-- Map Start -->
    <div id="map">

<ul id="layer-select" class="hidden-sm hidden-xs">
  <li class="btn btn-default select-sublayer0"><i class="fa fa-home fa-fw" aria-hidden="true"></i> Households</li>
  <li class="btn btn-default select-sublayer1"><i class="fa fa-history fa-fw" aria-hidden="true"></i> Age</li>
  <li class="btn btn-default select-sublayer2"><i class="fa fa-tint" aria-hidden="true"></i> Temporary toilets</li>
  <li class="btn btn-default select-sublayer3"><i class="fa fa-wrench fa-fw" aria-hidden="true"></i> Upgrade category</li>
  <li class="btn btn-default active select-sublayer4"><i class="fa fa-building-o fa-fw" aria-hidden="true"></i> Density</li>
</ul>

<div id="desktop-legend" class="legend hidden-xs hidden-sm"></div>

    <!-- Basemap toggle menu -->
      <div class="basemap-select hidden-xs">
          <div class="btn btn-default active base-map"><i class="fa fa-map-o fa-fw" aria-hidden="true"></i> Map</div>
          <div class="btn btn-default base-satellite"><i class="fa fa-globe fa-fw" aria-hidden="true"></i> Satellite</div>
      </div>

      <div class="basemap-select hidden-sm hidden-md hidden-lg">
          <div class="btn btn-default active base-map"><i class="fa fa-map-o fa-fw" aria-hidden="true"></i></div>
          <div class="btn btn-default base-satellite"><i class="fa fa-globe fa-fw" aria-hidden="true"></i></div>
      </div>

    </div>
    <!-- Map End -->

    <div id="mobile-legend" class="row legend hidden-md hidden-lg"></div>


    <!-- Dashboard Start -->
    <div id="dashboard" class="row hidden">
    <div class="col-md-3 col-basic-info">
        <h2 id="pocket_name"></h2>
        <p class="category"><b>Cluster</b></p>
        <p id="is_cluster"></p>       
        <p class="category"><b>Size</b></p>      
        <p style="display: inline;" id="area_ha"></p><p style="display: inline;"> km<sup>2</sup></p><p></p>
        <p class="category"><b>Number of households</b></p>
        <p id="structure_count"></p>
        <p class="category"><b>Household density</b></p>
        <p style="display: inline;" id="density_dwellings_per_ha"></p><p style="display: inline;"> per km<sup>2</sup></p><p></p>
        <p class="category"><b>Ratio of toilets to households</b></p>
        <p id="ratio_toilets_dwellings"></p>        
        <p class="category"><b>Temporary toilets</b></p>
        <p style="display: inline;" id="temp_sanitation"></p><p style="display: inline;">%</p><p></p>
        <p class="category"><b>Age</b></p>
        <p id="age_of_pocket"></p>        
        <p class="category"><b>Upgrade category</b></p>
        <p id="upgrade_category"></p>

    </div>  

    <div class="col-md-4">
    <div id="charts">
    <h4>Types of Toilets</h4>
    <div id="toilet_chart"></div>
    </div>
    </div>

    <div class="col-md-5">
    <div id="charts">
    <h4>Constraints on cluster level <a style="color: #08306b" href="javascript: void(0)" data-toggle="tooltip" title="A constraint is something that the City of Cape Town considers prevents them from installing proper sanitation. This chart shows the percentage of land that has these contraints."><i class="fa fa-question-circle" aria-hidden="true"></i></a></h4>
    <div id="constraints_chart"></div>
    </div>
    </div>

    </div>

    <!-- Dashboard End -->

    <!-- Data Source and Credits Start -->

    <div class="row" id="footer">
    <div class="col-lg-8 col-lg-offset-2">
    <p style="margin-top: 10px;">The data used to generate this map was obtained from the City of Cape Town in 2015. Some information was obtained from sources and others through access to information requests.</p>
    <p>This map of informal settlements in Cape Town is the result of a collaboration between <a href="http://nu.org.za/">Ndifuna Ukwazi</a>, <a href="http://www.sjc.org.za/">Social Justice Coalition</a>, <a href="http://www.internationalbudget.org/">International Budget Partnership</a>, and <a href="http://www.code4sa.org/">Code for South Africa</a>. For further information and comment please contact <a href="mailto:axolile@sjc.org.za">axolile@sjc.org.za</a> or <a href="mailto:jared@nu.org.za">jared@nu.org.za</a>.</p>
    </div>
    </div>

    <div class="row" id="logos">

    <div class="col-md-2 col-md-offset-2 col-sm-6">
    <a href="http://nu.org.za" target="_blank"><img class="center-block" src="img/logo-nu.png"/></a>
    </div>
    
    <div class="col-md-2 col-sm-6">
    <a href="http://sjc.org.za" target="_blank"><img class="center-block" src="img/logo-sjc.png"></a>
    </div>

    <div class="col-md-2 col-sm-6">
    <a href="http://internationalbudget.org" target="_blank"><img class="center-block" src="img/logo-ibp.png"></a>
    </div>

    <div class="col-md-2 col-sm-6">
    <a href="http://code4sa.org" target="_blank"><img class="center-block" src="img/logo-c4sa.png"></a>
    </div>

    </div>
    <!-- Data Source and Credits End -->

    <!-- Script Start -->

  </body>

  <script src="js/map-control.js"></script>
  <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="http://api.maps.nokia.com/2.1.1/jsl.js" type="text/javascript" charset="utf-8"></script>
  <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
      google.charts.load('current', {packages: ['corechart']});
  </script>
<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip(); 
});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48399585-39', 'auto');
  ga('send', 'pageview');

</script>

</html>